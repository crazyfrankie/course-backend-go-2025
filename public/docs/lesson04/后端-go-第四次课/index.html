<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=zh-cn class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>后端 Go 第四次课 | Go 后端开发教程</title><meta name=description content="后端 Go 第四次课"><meta property="og:url" content="https://example.org/docs/lesson04/%E5%90%8E%E7%AB%AF-go-%E7%AC%AC%E5%9B%9B%E6%AC%A1%E8%AF%BE/"><meta property="og:site_name" content="Go 后端开发教程"><meta property="og:title" content="后端 Go 第四次课"><meta property="og:description" content="后端 Go 第四次课"><meta property="og:locale" content="zh_cn"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta itemprop=name content="后端 Go 第四次课"><meta itemprop=description content="后端 Go 第四次课"><meta itemprop=wordCount content="3230"><meta name=twitter:card content="summary"><meta name=twitter:title content="后端 Go 第四次课"><meta name=twitter:description content="后端 Go 第四次课"><link rel=preload href=/scss/main.min.4b81c3216eb932c6fab255dad0cfe0aabe89476492b04055884be8313be15923.css as=style integrity="sha256-S4HDIW65Msb6slXa0M/gqr6JR2SSsEBViEvoMTvhWSM=" crossorigin=anonymous><link href=/scss/main.min.4b81c3216eb932c6fab255dad0cfe0aabe89476492b04055884be8313be15923.css rel=stylesheet integrity="sha256-S4HDIW65Msb6slXa0M/gqr6JR2SSsEBViEvoMTvhWSM=" crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script></head><body class=td-page><header><nav class="td-navbar js-navbar-scroll" data-bs-theme=dark><div class="container-fluid flex-column flex-md-row"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zm7.993 21.8577c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class=navbar-brand__name>Go 后端开发教程</span></a><div class="td-navbar-nav-scroll ms-md-auto" id=main_navbar><ul class=navbar-nav><li class=nav-item><a class=nav-link href=/><span>课程首页</span></a></li><li class=nav-item><a class=nav-link href=/docs/><span>课程文档</span></a></li><li class=nav-item><a class=nav-link href=https://github.com/CrazyForCode/course-backend-go-2025 target=_blank rel=noopener><span>GitHub</span></a></li></ul></div><div class="d-none d-lg-block"></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type=button data-bs-toggle=collapse data-bs-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="td-sidebar-nav collapse" id=td-section-nav><ul class="td-sidebar-nav__section pe-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li><a href=/docs/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>课程文档</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docslesson00e4bb8e-0-e5bc80e5a78be5ada6-go-li><a href=/docs/lesson00/%E4%BB%8E-0-%E5%BC%80%E5%A7%8B%E5%AD%A6-go/ title="从 0 开始学 Go" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docslesson00e4bb8e-0-e5bc80e5a78be5ada6-go><span>第0课</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docslesson01e8939de5b1b1e5b7a5e4bd9ce5aea4golange7acace4b880e88a82e8afbe-li><a href=/docs/lesson01/%E8%93%9D%E5%B1%B1%E5%B7%A5%E4%BD%9C%E5%AE%A4golang%E7%AC%AC%E4%B8%80%E8%8A%82%E8%AF%BE/ title=基础语法 class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docslesson01e8939de5b1b1e5b7a5e4bd9ce5aea4golange7acace4b880e88a82e8afbe><span>第1课</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docslesson0202-li><a href=/docs/lesson02/02/ title=数组和切片 class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docslesson0202><span>第2课</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docslesson03e7acace4b889e591a8e8afbee4bbb6-li><a href=/docs/lesson03/%E7%AC%AC%E4%B8%89%E5%91%A8%E8%AF%BE%E4%BB%B6/ title=包、指针、结构体和接口 class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docslesson03e7acace4b889e591a8e8afbee4bbb6><span>第3课</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-docslesson04e5908ee7abaf-go-e7acace59b9be6aca1e8afbe-li><a href=/docs/lesson04/%E5%90%8E%E7%AB%AF-go-%E7%AC%AC%E5%9B%9B%E6%AC%A1%E8%AF%BE/ title="后端 Go 第四次课" class="align-left ps-0 active td-sidebar-link td-sidebar-link__page" id=m-docslesson04e5908ee7abaf-go-e7acace59b9be6aca1e8afbe><span class=td-sidebar-nav-active-item>第4课</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docslesson05e5b9b6e58f91-li><a href=/docs/lesson05/%E5%B9%B6%E5%8F%91/ title=并发编程 class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docslesson05e5b9b6e58f91><span>第5课</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docslesson06readme-li><a href=/docs/lesson06/readme/ title="HTTP 服务简单案例" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docslesson06readme><span>第6课</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docslesson07lesson7-li><a href=/docs/lesson07/lesson7/ title="MySQL 数据库" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docslesson07lesson7><span>第7课</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docslesson08readme-li><a href=/docs/lesson08/readme/ title="Redis 和 MongoDB" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docslesson08readme><span>第8课</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docslesson09readme-li><a href=/docs/lesson09/readme/ title=第九课 class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docslesson09readme><span>第9课</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docslesson10docker-li><a href=/docs/lesson10/docker/ title="Docker 容器化" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docslesson10docker><span>第10课</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docslesson11readme-li><a href=/docs/lesson11/readme/ title=单体架构实战 class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docslesson11readme><span>第11课</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docslesson12e6b688e681afe9989fe58897-li><a href=/docs/lesson12/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/ title=第十二课 class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docslesson12e6b688e681afe9989fe58897><span>第12课</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docslesson13lesson13-li><a href=/docs/lesson13/lesson13/ title=微服务入门 class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docslesson13lesson13><span>第13课</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docslesson14lesson14-li><a href=/docs/lesson14/lesson14/ title="Go-zero 微服务" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docslesson14lesson14><span>第14课</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docslesson15readme-li><a href=/docs/lesson15/readme/ title=第十五课 class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docslesson15readme><span>第15课</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docslesson16readme-li><a href=/docs/lesson16/readme/ title=负载均衡 class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docslesson16readme><span>第16课</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docslesson17e5908ee7abaf-go-e7acace58d81e4b883e6aca1e8afbe-li><a href=/docs/lesson17/%E5%90%8E%E7%AB%AF-go-%E7%AC%AC%E5%8D%81%E4%B8%83%E6%AC%A1%E8%AF%BE/ title=第十七课 class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docslesson17e5908ee7abaf-go-e7acace58d81e4b883e6aca1e8afbe><span>第17课</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docslesson18e58886e5b883e5bc8fe59fbae7a180-li><a href=/docs/lesson18/%E5%88%86%E5%B8%83%E5%BC%8F%E5%9F%BA%E7%A1%80/ title=第十八课 class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docslesson18e58886e5b883e5bc8fe59fbae7a180><span>第18课</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docslesson09example2baidu-li><a href=/docs/lesson09/example2/baidu/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docslesson09example2baidu><span></span></a></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ms-2 pb-1 pt-2 mb-0"><a href=https://github.com/your-username/course-backend-go-2025/tree/main/content/docs/lesson04/%e5%90%8e%e7%ab%af%20Go%20%e7%ac%ac%e5%9b%9b%e6%ac%a1%e8%af%be.md class="td-page-meta--view td-page-meta__view" target=_blank rel=noopener><i class="fa-solid fa-file-lines fa-fw"></i> 查看页面源码</a>
<a href=https://github.com/your-username/course-backend-go-2025/edit/main/content/docs/lesson04/%e5%90%8e%e7%ab%af%20Go%20%e7%ac%ac%e5%9b%9b%e6%ac%a1%e8%af%be.md class="td-page-meta--edit td-page-meta__edit" target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> 编辑此页</a>
<a href="https://github.com/your-username/course-backend-go-2025/new/main/content/docs/lesson04?filename=change-me.md&amp;value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" class="td-page-meta--child td-page-meta__child" target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> 添加子页面</a>
<a href="https://github.com/your-username/course-backend-go-2025/issues/new?title=%e5%90%8e%e7%ab%af%20Go%20%e7%ac%ac%e5%9b%9b%e6%ac%a1%e8%af%be" class="td-page-meta--issue td-page-meta__issue" target=_blank rel=noopener><i class="fa-solid fa-list-check fa-fw"></i> 提交文档问题</a></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#前言>前言</a></li><li><a href=#time>time</a><ul><li><a href=#时区>时区</a></li><li><a href=#时间>时间</a></li><li><a href=#操作>操作</a></li><li><a href=#转换>转换</a></li><li><a href=#定时器>定时器</a></li><li><a href=#example>example</a></li></ul></li><li><a href=#strconv>strconv</a><ul><li><a href=#字符串到基本数据类型>字符串到基本数据类型</a></li><li><a href=#基本数据类型到字符串>基本数据类型到字符串</a></li><li><a href=#字符串扩展>字符串扩展</a></li><li><a href=#example-1>example</a></li></ul></li><li><a href=#os>os</a><ul><li><a href=#文件和目录操作>文件和目录操作</a></li><li><a href=#环境变量>环境变量</a></li><li><a href=#命令行参数>命令行参数</a></li><li><a href=#example-2>example</a></li></ul></li><li><a href=#io>I/O</a><ul><li><a href=#io-1>io</a></li><li><a href=#bufio>bufio</a></li><li><a href=#strings--bytes>strings & bytes</a></li><li><a href=#example-3>example</a></li></ul></li><li><a href=#初识开源>初识开源</a><ul><li><a href=#什么是开源>什么是开源</a></li><li><a href=#开源项目的运作>开源项目的运作</a></li><li><a href=#pr>PR</a></li><li><a href=#怎么找到自己感兴趣的开源项目>怎么找到自己感兴趣的开源项目？</a></li><li><a href=#从开源项目中我们能学到什么>从开源项目中我们能学到什么</a></li></ul></li><li><a href=#拓展阅读>拓展阅读</a></li><li><a href=#作业>作业</a><ul><li><a href=#lv0>LV0</a></li><li><a href=#lv1>LV1</a></li><li><a href=#lv2>LV2</a></li><li><a href=#lv2-plus>LV2 PLUS</a></li><li><a href=#lv-pro-max>LV PRO MAX</a></li><li><a href=#lv>LV?</a></li><li><a href=#lv-1>LV??</a></li></ul></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=/docs/>课程文档</a></li><li class="breadcrumb-item active" aria-current=page>第4课</li></ol></nav><div class=td-content><h1>后端 Go 第四次课</h1><div class=lead>后端 Go 第四次课</div><header class=article-meta></header><h2 id=前言>前言</h2><p>这节课主要讲 Go 语言自带的一些常用的包，学习 Go 标准库可以从标准库文档入手：</p><ul><li>中文（版本有些落后）： <a href=https://studygolang.com/pkgdoc>https://studygolang.com/pkgdoc</a></li><li>英文： <a href=https://pkg.go.dev/std>https://pkg.go.dev/std</a></li></ul><h2 id=time>time</h2><h3 id=时区>时区</h3><p>在 Golang 的 <code>time</code> 包中，时区用结构体 <code>Location</code> 表示</p><p>UTC 标准时间是以 GMT（Greenwich Mean Time，格林尼治时间）这个时区为主，所以本地时间与 UTC 时间的时差就是本地时间与 GMT 时间的时差。</p><pre tabindex=0><code>UTC + 时间差 = 本地时间
</code></pre><blockquote><p>获取时区</p></blockquote><p>在 Golang 的 <code>time</code> 包中有两个时区变量:</p><ul><li>time.UTC： UTC 时间</li><li>time.Local 本地时间</li></ul><p>除此之外还可以通过 <code>FixedZone</code> 、 <code>LoadLocation</code> 和 <code>Load</code> 方法来获取变量:</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>LoadLocation</span><span style=color:#1f2328>(</span><span style=color:#1f2328>name</span> <span style=color:#cf222e>string</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>(</span><span style=color:#0550ae>*</span><span style=color:#1f2328>Location</span><span style=color:#1f2328>,</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span>
</span></span></code></pre></td></tr></table></div></div><p><code>FixedZone</code> 使用给定的时区名 <code>name</code> 和时间偏移量（单位秒）<code>offset</code> 创建并返回一个 <code>Location</code> 结构体</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>FixedZone</span><span style=color:#1f2328>(</span><span style=color:#1f2328>name</span> <span style=color:#cf222e>string</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>offset</span> <span style=color:#cf222e>int</span><span style=color:#1f2328>)</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>Location</span>
</span></span></code></pre></td></tr></table></div></div><p><code>LoadLoaciton</code> 返回给定 <code>name</code> 的 <code>Location</code> 结构体，如果 <code>name</code> 为 <code>UTC</code> 或 <code>Local</code>，则返回一个 <code>time.UTC</code> 或 <code>time.Local</code>，否则 <code>name</code> 应该是在 IANA 时区数据库中有记录的地点名</p><blockquote><p>指定时区</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>t</span> <span style=color:#1f2328>Time</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>In</span><span style=color:#1f2328>(</span><span style=color:#1f2328>loc</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>Location</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>Time</span>
</span></span></code></pre></td></tr></table></div></div><p><code>In</code> 返回采用 <code>loc</code> 指定的时区的时间</p><h3 id=时间>时间</h3><p><code>time</code> 包中的时间使用结构体 <code>Time</code> 表示:</p><blockquote><p>获取当前时间</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>Now</span><span style=color:#1f2328>()</span> <span style=color:#1f2328>Time</span>
</span></span></code></pre></td></tr></table></div></div><p>Now 返回当前本地时间</p><blockquote><p>获取年、月、日……</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>t</span> <span style=color:#1f2328>Time</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>Clock</span><span style=color:#1f2328>()</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>hour</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>min</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>sec</span> <span style=color:#cf222e>int</span><span style=color:#1f2328>)</span> <span style=color:#57606a>// 返回 t 对应的时、分、秒</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>t</span> <span style=color:#1f2328>Time</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>Hour</span><span style=color:#1f2328>()</span> <span style=color:#cf222e>int</span> 
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>t</span> <span style=color:#1f2328>Time</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>Minute</span><span style=color:#1f2328>()</span> <span style=color:#cf222e>int</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>t</span> <span style=color:#1f2328>Time</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>Second</span><span style=color:#1f2328>()</span> <span style=color:#cf222e>int</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>t</span> <span style=color:#1f2328>Time</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>Nanosecond</span><span style=color:#1f2328>()</span> <span style=color:#cf222e>int</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cf222e>type</span> <span style=color:#1f2328>Month</span> <span style=color:#cf222e>int</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>t</span> <span style=color:#1f2328>Time</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>Date</span><span style=color:#1f2328>()</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>year</span> <span style=color:#cf222e>int</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>month</span> <span style=color:#1f2328>Month</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>day</span> <span style=color:#cf222e>int</span><span style=color:#1f2328>)</span> <span style=color:#57606a>// 返回 t 对应的年、月、日</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>t</span> <span style=color:#1f2328>Time</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>Year</span><span style=color:#1f2328>()</span> <span style=color:#cf222e>int</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>t</span> <span style=color:#1f2328>Time</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>Month</span><span style=color:#1f2328>()</span> <span style=color:#1f2328>Month</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>t</span> <span style=color:#1f2328>Time</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>Day</span><span style=color:#1f2328>()</span> <span style=color:#cf222e>int</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=操作>操作</h3><p><code>time</code> 包中，用来表示时间段（纳秒为单位）的是 <code>Duration</code>:</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>type</span> <span style=color:#1f2328>Duration</span> <span style=color:#cf222e>int64</span>
</span></span></code></pre></td></tr></table></div></div><p><code>Duration</code> 最大大约能表示 290 年</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>t</span> <span style=color:#1f2328>Time</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>Add</span><span style=color:#1f2328>(</span><span style=color:#1f2328>d</span> <span style=color:#1f2328>Duration</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>Time</span>  <span style=color:#57606a>// `Add` 返回时间 t+d</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>t</span> <span style=color:#1f2328>Time</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>AddDate</span><span style=color:#1f2328>(</span><span style=color:#1f2328>years</span> <span style=color:#cf222e>int</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>months</span> <span style=color:#cf222e>int</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>days</span> <span style=color:#cf222e>int</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>Time</span> <span style=color:#57606a>// `AddDate` 返回时间 t+date</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>t</span> <span style=color:#1f2328>Time</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>Sub</span><span style=color:#1f2328>(</span><span style=color:#1f2328>u</span> <span style=color:#1f2328>Time</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>Duration</span>  <span style=color:#57606a>// `Sub` 返回时间 t-d</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>t</span> <span style=color:#1f2328>Time</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>Equal</span><span style=color:#1f2328>(</span><span style=color:#1f2328>u</span> <span style=color:#1f2328>Time</span><span style=color:#1f2328>)</span> <span style=color:#cf222e>bool</span>    <span style=color:#57606a>// `Equal` 判断 t 和 u 是否相同，注意如果精度不同，两个时间也是不一样的</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>t</span> <span style=color:#1f2328>Time</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>Before</span><span style=color:#1f2328>(</span><span style=color:#1f2328>u</span> <span style=color:#1f2328>Time</span><span style=color:#1f2328>)</span> <span style=color:#cf222e>bool</span>   <span style=color:#57606a>// `Before` 判断 t 是否在 u 之后</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>t</span> <span style=color:#1f2328>Time</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>After</span><span style=color:#1f2328>(</span><span style=color:#1f2328>u</span> <span style=color:#1f2328>Time</span><span style=color:#1f2328>)</span> <span style=color:#cf222e>bool</span>    <span style=color:#57606a>// `After` 判断 t 是否在 u 之前</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>Since</span><span style=color:#1f2328>(</span><span style=color:#1f2328>t</span> <span style=color:#1f2328>Time</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>Duration</span>         <span style=color:#57606a>// `Since` 返回 t 到现在经过的时间</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>Until</span><span style=color:#1f2328>(</span><span style=color:#1f2328>t</span> <span style=color:#1f2328>Time</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>Duration</span>         <span style=color:#57606a>// `Until` 返回现在到 t 的时间</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>t</span> <span style=color:#1f2328>Time</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>Truncate</span><span style=color:#1f2328>(</span><span style=color:#1f2328>d</span> <span style=color:#1f2328>Duration</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>Time</span>  <span style=color:#57606a>// `Truncate` 将时间阶段为某一精度</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=转换>转换</h3><h4 id=时间-1>时间</h4><blockquote><p>时间转换到时间戳</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>t</span> <span style=color:#1f2328>Time</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>Unix</span><span style=color:#1f2328>()</span> <span style=color:#cf222e>int64</span>        <span style=color:#57606a>// 秒</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>t</span> <span style=color:#1f2328>Time</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>UnixMilli</span><span style=color:#1f2328>()</span> <span style=color:#cf222e>int64</span>   <span style=color:#57606a>// 毫秒</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>t</span> <span style=color:#1f2328>Time</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>UnixMicro</span><span style=color:#1f2328>()</span> <span style=color:#cf222e>int64</span>   <span style=color:#57606a>// 微秒</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>t</span> <span style=color:#1f2328>Time</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>UnixNano</span><span style=color:#1f2328>()</span> <span style=color:#cf222e>int64</span>    <span style=color:#57606a>// 纳秒</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>时间戳转换到时间</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>Unix</span><span style=color:#1f2328>(</span><span style=color:#1f2328>sec</span> <span style=color:#cf222e>int64</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>nsec</span> <span style=color:#cf222e>int64</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>Time</span>   <span style=color:#57606a>// 秒和纳秒</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>UnixMilli</span><span style=color:#1f2328>(</span><span style=color:#1f2328>msec</span> <span style=color:#cf222e>int64</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>Time</span>         <span style=color:#57606a>// 毫秒</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>UnixMicro</span><span style=color:#1f2328>(</span><span style=color:#1f2328>usec</span> <span style=color:#cf222e>int64</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>Time</span>         <span style=color:#57606a>// 微秒</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>时间格式化为字符串</p></blockquote><p>Go语言中格式化时间模板不是常见的 <code>Y-m-d H:M:S</code> 而是使用Go语言的诞生时间 2006 年 1 月 2 号 15 点 04 分 05 秒，也就是 <code>2006-01-02 15:04:05</code></p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>t</span> <span style=color:#1f2328>Time</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>Format</span><span style=color:#1f2328>(</span><span style=color:#1f2328>layout</span> <span style=color:#cf222e>string</span><span style=color:#1f2328>)</span> <span style=color:#cf222e>string</span>
</span></span></code></pre></td></tr></table></div></div><p><code>Format</code> 根据 <code>layout</code> 指定的格式返回 t 代表的时间点的格式化文本表示</p><blockquote><p>字符串解析为时间</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>Parse</span><span style=color:#1f2328>(</span><span style=color:#1f2328>layout</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>value</span> <span style=color:#cf222e>string</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>Time</span><span style=color:#1f2328>,</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span>
</span></span></code></pre></td></tr></table></div></div><p><code>Parse</code> 根据 <code>layout</code> 指定的格式解析一个格式化的时间字符串并返回它代表的时间</p><h4 id=时间段>时间段</h4><blockquote><p>字符串解析为时间段</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>ParseDuration</span><span style=color:#1f2328>(</span><span style=color:#1f2328>s</span> <span style=color:#cf222e>string</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>Duration</span><span style=color:#1f2328>,</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span>
</span></span></code></pre></td></tr></table></div></div><p><code>ParseDuration</code> 解析一个时间段字符串，如"300ms"、"-1.5h"、&ldquo;2h45m&rdquo;。合法的单位有"ns"、&ldquo;us&rdquo; /&ldquo;µs&rdquo;、&ldquo;ms&rdquo;、&ldquo;s&rdquo;、&ldquo;m&rdquo;、&ldquo;h&rdquo;</p><blockquote><p>时间段表示为 float64</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>d</span> <span style=color:#1f2328>Duration</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>Hours</span><span style=color:#1f2328>()</span> <span style=color:#cf222e>float64</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>d</span> <span style=color:#1f2328>Duration</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>Minutes</span><span style=color:#1f2328>()</span> <span style=color:#cf222e>float64</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>d</span> <span style=color:#1f2328>Duration</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>Seconds</span><span style=color:#1f2328>()</span> <span style=color:#cf222e>float64</span>
</span></span></code></pre></td></tr></table></div></div><p>分别将时间段表示 float64 类型的小时、分钟、秒数</p><h3 id=定时器>定时器</h3><p>在 Go 语言中，<code>time</code> 包提供了 <code>Timer</code> 和 <code>Ticker</code> 两种类型，用于处理定时和周期性的时间事件。</p><blockquote><p>Timer</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>NewTimer</span><span style=color:#1f2328>(</span><span style=color:#1f2328>d</span> <span style=color:#1f2328>Duration</span><span style=color:#1f2328>)</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>Timer</span>
</span></span></code></pre></td></tr></table></div></div><p><code>Timer</code> 类型表示一个单次事件。在未来的某个时间点，<code>Timer</code> 会发送一个值到它的 <code>C</code> 通道，使用 <code>ticker</code> 的 <code>Stop</code> 方法可以提前停止它</p><blockquote><p>Ticker</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>NewTicker</span><span style=color:#1f2328>(</span><span style=color:#1f2328>d</span> <span style=color:#1f2328>Duration</span><span style=color:#1f2328>)</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>Ticker</span>
</span></span></code></pre></td></tr></table></div></div><p><code>Ticker</code> 表示一个周期事件，跟 <code>Timer</code> 差不多</p><h3 id=example>example</h3><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">68
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>main</span><span style=color:#1f2328>()</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 时区  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>loc</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>time</span><span style=color:#1f2328>.</span><span style=color:#6639ba>LoadLocation</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;Asia/Shanghai&#34;</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>!=</span> <span style=color:#cf222e>nil</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#1f2328>err</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>       <span style=color:#cf222e>return</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>now</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>time</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Now</span><span style=color:#1f2328>()</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#1f2328>now</span><span style=color:#1f2328>.</span><span style=color:#6639ba>In</span><span style=color:#1f2328>(</span><span style=color:#1f2328>loc</span><span style=color:#1f2328>))</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 使用 Clock() 方法获取时、分、秒  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>hour</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>min</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>sec</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>now</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Clock</span><span style=color:#1f2328>()</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Printf</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;时：%d 分：%d 秒：%d\n&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>hour</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>min</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>sec</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 使用 Hour()、Minute()、Second() 方法获取时、分、秒  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Printf</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;时：%d 分：%d 秒：%d\n&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>now</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Hour</span><span style=color:#1f2328>(),</span> <span style=color:#1f2328>now</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Minute</span><span style=color:#1f2328>(),</span> <span style=color:#1f2328>now</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Second</span><span style=color:#1f2328>())</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>year</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>month</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>day</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>now</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Date</span><span style=color:#1f2328>()</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Printf</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;年：%d 月：%s 日：%d\n&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>year</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>month</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>day</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 使用 Year()、Month()、Day() 方法获取年、月、日  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Printf</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;年：%d 月：%s 日：%d\n&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>now</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Year</span><span style=color:#1f2328>(),</span> <span style=color:#1f2328>now</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Month</span><span style=color:#1f2328>(),</span> <span style=color:#1f2328>now</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Day</span><span style=color:#1f2328>())</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 在当前时间上加上一小时  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>oneHourLater</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>now</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Add</span><span style=color:#1f2328>(</span><span style=color:#1f2328>time</span><span style=color:#1f2328>.</span><span style=color:#1f2328>Hour</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;一小时后的时间：&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>oneHourLater</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 在当前时间上加上指定的年、月、日  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>oneYearThreeMonthsFiveDaysLater</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>now</span><span style=color:#1f2328>.</span><span style=color:#6639ba>AddDate</span><span style=color:#1f2328>(</span><span style=color:#0550ae>1</span><span style=color:#1f2328>,</span> <span style=color:#0550ae>3</span><span style=color:#1f2328>,</span> <span style=color:#0550ae>5</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;一年三个月五天后的时间：&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>oneYearThreeMonthsFiveDaysLater</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 计算两个时间的差值  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>otherTime</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>now</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Add</span><span style=color:#1f2328>(</span><span style=color:#0550ae>2</span> <span style=color:#0550ae>*</span> <span style=color:#1f2328>time</span><span style=color:#1f2328>.</span><span style=color:#1f2328>Hour</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>duration</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>otherTime</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Sub</span><span style=color:#1f2328>(</span><span style=color:#1f2328>now</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;两个时间的差值：&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>duration</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 判断两个时间是否相同  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>areEqual</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>now</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Equal</span><span style=color:#1f2328>(</span><span style=color:#1f2328>otherTime</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;两个时间是否相同：&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>areEqual</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 判断时间先后顺序  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>isBefore</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>now</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Before</span><span style=color:#1f2328>(</span><span style=color:#1f2328>otherTime</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>isAfter</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>now</span><span style=color:#1f2328>.</span><span style=color:#6639ba>After</span><span style=color:#1f2328>(</span><span style=color:#1f2328>otherTime</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;当前时间是否在其他时间之前：&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>isBefore</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;当前时间是否在其他时间之后：&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>isAfter</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 计算从某个时间点到现在的时间差  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>timeSince</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>time</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Since</span><span style=color:#1f2328>(</span><span style=color:#1f2328>now</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;从当前时间到现在的时间差：&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>timeSince</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 计算从现在到某个时间点的时间差  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>timeUntil</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>time</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Until</span><span style=color:#1f2328>(</span><span style=color:#1f2328>otherTime</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;从现在到其他时间的时间差：&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>timeUntil</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 截断时间到指定精度  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>truncatedTime</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>now</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Truncate</span><span style=color:#1f2328>(</span><span style=color:#1f2328>time</span><span style=color:#1f2328>.</span><span style=color:#1f2328>Hour</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;截断到小时的时间：&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>truncatedTime</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 格式化时间输出  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>formattedTime</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>now</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Format</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;2006-01-02 15:04:05&#34;</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;格式化时间：&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>formattedTime</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 解析字符串为时间  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>timeStr</span> <span style=color:#0550ae>:=</span> <span style=color:#0a3069>&#34;2023-11-15 12:30:45&#34;</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>parsedTime</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>time</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Parse</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;2006-01-02 15:04:05&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>timeStr</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>!=</span> <span style=color:#cf222e>nil</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;解析时间出错：&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span> <span style=color:#cf222e>else</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;解析后的时间：&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>parsedTime</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 解析时间段字符串  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>durationStr</span> <span style=color:#0550ae>:=</span> <span style=color:#0a3069>&#34;1h30m45s&#34;</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>parsedDuration</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>time</span><span style=color:#1f2328>.</span><span style=color:#6639ba>ParseDuration</span><span style=color:#1f2328>(</span><span style=color:#1f2328>durationStr</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>!=</span> <span style=color:#cf222e>nil</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;解析持续时间出错：&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span> <span style=color:#cf222e>else</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Printf</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;解析后的持续时间：%v，总小时数：%f\n&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>parsedDuration</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>parsedDuration</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Hours</span><span style=color:#1f2328>())</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>  
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>main</span><span style=color:#1f2328>()</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>ticker</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>time</span><span style=color:#1f2328>.</span><span style=color:#6639ba>NewTicker</span><span style=color:#1f2328>(</span><span style=color:#1f2328>time</span><span style=color:#1f2328>.</span><span style=color:#1f2328>Second</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#cf222e>defer</span> <span style=color:#1f2328>ticker</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Stop</span><span style=color:#1f2328>()</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#cf222e>for</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#0550ae>&lt;-</span><span style=color:#1f2328>ticker</span><span style=color:#1f2328>.</span><span style=color:#1f2328>C</span> <span style=color:#57606a>// 等待定时器通道触发  </span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>       <span style=color:#57606a>// 在这里执行定时任务  </span>
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;Tick at&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>time</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Now</span><span style=color:#1f2328>())</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>  
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=strconv>strconv</h2><h3 id=字符串到基本数据类型>字符串到基本数据类型</h3><blockquote><p>int</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>Atoi</span><span style=color:#1f2328>(</span><span style=color:#1f2328>s</span> <span style=color:#cf222e>string</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>(</span><span style=color:#cf222e>int</span><span style=color:#1f2328>,</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span>
</span></span></code></pre></td></tr></table></div></div><p><code>Atoi</code> 将字符串转换为 int 类型</p><blockquote><p>int64 或 uint64</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>ParseInt</span><span style=color:#1f2328>(</span><span style=color:#1f2328>s</span> <span style=color:#cf222e>string</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>base</span> <span style=color:#cf222e>int</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>bitSize</span> <span style=color:#cf222e>int</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>i</span> <span style=color:#cf222e>int64</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>ParseUint</span><span style=color:#1f2328>(</span><span style=color:#1f2328>s</span> <span style=color:#cf222e>string</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>base</span> <span style=color:#cf222e>int</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>bitSize</span> <span style=color:#cf222e>int</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>(</span><span style=color:#cf222e>uint64</span><span style=color:#1f2328>,</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span>
</span></span></code></pre></td></tr></table></div></div><p><code>ParseInt</code> 和 <code>ParseUint</code> 将字符串转换为整数值，<code>base</code> 指定进制（2到36），如果 <code>base</code> 为 0，则从字符串前置判断，&ldquo;0x"是16进制，&ldquo;0"是8进制，否则是10进制，<code>bitsSize</code> 指定结果必须能无溢出赋值的整数类型，否则会返回一个错误，0、8、16、32、64 分别表示 int、int8、int16、int32、int64</p><blockquote><p>float</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>ParseFloat</span><span style=color:#1f2328>(</span><span style=color:#1f2328>s</span> <span style=color:#cf222e>string</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>bitSize</span> <span style=color:#cf222e>int</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>(</span><span style=color:#cf222e>float64</span><span style=color:#1f2328>,</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span>
</span></span></code></pre></td></tr></table></div></div><p><code>ParseFloat</code> 将字符串转换为浮点数，<code>bitSize</code> 指定期望的接收类型，32 是 float32，64 是 float64</p><blockquote><p>bool</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>ParseBool</span><span style=color:#1f2328>(</span><span style=color:#1f2328>str</span> <span style=color:#cf222e>string</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>value</span> <span style=color:#cf222e>bool</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span>
</span></span></code></pre></td></tr></table></div></div><p><code>ParseBool</code> 返回字符串表示的bool值。它接受1、0、t、f、T、F、true、false、True、False、TRUE、FALSE；否则返回错误</p><h3 id=基本数据类型到字符串>基本数据类型到字符串</h3><blockquote><p>int</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>Itoa</span><span style=color:#1f2328>(</span><span style=color:#1f2328>i</span> <span style=color:#cf222e>int</span><span style=color:#1f2328>)</span> <span style=color:#cf222e>string</span>
</span></span></code></pre></td></tr></table></div></div><p><code>Itoa</code> 将 int 类型表示为对应的字符串</p><blockquote><p>int 或 uint</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>FormatInt</span><span style=color:#1f2328>(</span><span style=color:#1f2328>i</span> <span style=color:#cf222e>int64</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>base</span> <span style=color:#cf222e>int</span><span style=color:#1f2328>)</span> <span style=color:#cf222e>string</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>FormatUint</span><span style=color:#1f2328>(</span><span style=color:#1f2328>i</span> <span style=color:#cf222e>uint64</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>base</span> <span style=color:#cf222e>int</span><span style=color:#1f2328>)</span> <span style=color:#cf222e>string</span>
</span></span></code></pre></td></tr></table></div></div><p><code>FormatInt</code> 和 <code>FormatUint</code> 返回 i 的 <code>base</code> 进制的字符串</p><blockquote><p>float</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>FormatFloat</span><span style=color:#1f2328>(</span><span style=color:#1f2328>f</span> <span style=color:#cf222e>float64</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>fmt</span> <span style=color:#cf222e>byte</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>prec</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>bitSize</span> <span style=color:#cf222e>int</span><span style=color:#1f2328>)</span> <span style=color:#cf222e>string</span>
</span></span></code></pre></td></tr></table></div></div><p><code>FormatFloat</code> 将浮点数表示为字符串，<code>bitSize</code> 表示来源的类型，并据此进行舍入。<code>fmt</code> 表示使用的格式: &lsquo;f&rsquo;（-ddd.dddd）、&lsquo;b&rsquo;（-ddddp±ddd，指数为二进制）、&rsquo;e&rsquo;（-d.dddde±dd，十进制指数）、&lsquo;E&rsquo;（-d.ddddE±dd，十进制指数）、&lsquo;g&rsquo;（指数很大时用&rsquo;e&rsquo;格式，否则&rsquo;f&rsquo;格式）、&lsquo;G&rsquo;（指数很大时用&rsquo;E&rsquo;格式，否则&rsquo;f&rsquo;格式）。<code>prec</code> 控制精度，对&rsquo;f&rsquo;、&rsquo;e&rsquo;、&lsquo;E&rsquo;，它表示小数点后的数字个数；对 &lsquo;g&rsquo;、&lsquo;G&rsquo;，它控制总的数字个数。如果 <code>prec</code> 为 -1，则代表使用最少数量的、但又必需的数字来表示浮点数</p><blockquote><p>bool</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>FormatBool</span><span style=color:#1f2328>(</span><span style=color:#1f2328>b</span> <span style=color:#cf222e>bool</span><span style=color:#1f2328>)</span> <span style=color:#cf222e>string</span>
</span></span></code></pre></td></tr></table></div></div><p>根据 <code>b</code> 的值返回"true"或"false&rdquo;</p><h3 id=字符串扩展>字符串扩展</h3><p>如 <code>AppendInt</code>，它实际上等价于 <code>append(dst, FormatInt(I, base)...)</code></p><p>类似的函数还有 <code>AppendBool</code>、<code>AppendInt</code>、 <code>AppendUint</code>……</p><h3 id=example-1>example</h3><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">63
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>main</span><span style=color:#1f2328>()</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 字符串转换为整数  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>intStr</span> <span style=color:#0550ae>:=</span> <span style=color:#0a3069>&#34;123&#34;</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>intValue</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>strconv</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Atoi</span><span style=color:#1f2328>(</span><span style=color:#1f2328>intStr</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>!=</span> <span style=color:#cf222e>nil</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;字符串转整数出错:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span> <span style=color:#cf222e>else</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;整数值:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>intValue</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 字符串转换为整数（指定进制）  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>hexStr</span> <span style=color:#0550ae>:=</span> <span style=color:#0a3069>&#34;1a&#34;</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>hexValue</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>strconv</span><span style=color:#1f2328>.</span><span style=color:#6639ba>ParseInt</span><span style=color:#1f2328>(</span><span style=color:#1f2328>hexStr</span><span style=color:#1f2328>,</span> <span style=color:#0550ae>16</span><span style=color:#1f2328>,</span> <span style=color:#0550ae>0</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>!=</span> <span style=color:#cf222e>nil</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;16进制字符串转整数出错:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span> <span style=color:#cf222e>else</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;16进制整数值:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>hexValue</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 字符串转换为无符号整数（指定进制）  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>uintStr</span> <span style=color:#0550ae>:=</span> <span style=color:#0a3069>&#34;255&#34;</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>uintValue</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>strconv</span><span style=color:#1f2328>.</span><span style=color:#6639ba>ParseUint</span><span style=color:#1f2328>(</span><span style=color:#1f2328>uintStr</span><span style=color:#1f2328>,</span> <span style=color:#0550ae>10</span><span style=color:#1f2328>,</span> <span style=color:#0550ae>0</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>!=</span> <span style=color:#cf222e>nil</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;字符串转无符号整数出错:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span> <span style=color:#cf222e>else</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;无符号整数值:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>uintValue</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 字符串转换为浮点数  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>floatStr</span> <span style=color:#0550ae>:=</span> <span style=color:#0a3069>&#34;3.14&#34;</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>floatValue</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>strconv</span><span style=color:#1f2328>.</span><span style=color:#6639ba>ParseFloat</span><span style=color:#1f2328>(</span><span style=color:#1f2328>floatStr</span><span style=color:#1f2328>,</span> <span style=color:#0550ae>64</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>!=</span> <span style=color:#cf222e>nil</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;字符串转浮点数出错:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span> <span style=color:#cf222e>else</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;浮点数值:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>floatValue</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 字符串转换为布尔值  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>boolStr</span> <span style=color:#0550ae>:=</span> <span style=color:#0a3069>&#34;true&#34;</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>boolValue</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>strconv</span><span style=color:#1f2328>.</span><span style=color:#6639ba>ParseBool</span><span style=color:#1f2328>(</span><span style=color:#1f2328>boolStr</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>!=</span> <span style=color:#cf222e>nil</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;字符串转布尔值出错:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span> <span style=color:#cf222e>else</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;布尔值:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>boolValue</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 整数转换为字符串  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>intValueToStr</span> <span style=color:#0550ae>:=</span> <span style=color:#0550ae>42</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>intStrFromInt</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>strconv</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Itoa</span><span style=color:#1f2328>(</span><span style=color:#1f2328>intValueToStr</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;整数转字符串:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>intStrFromInt</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 格式化整数为字符串  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>otherIntValueToStr</span> <span style=color:#0550ae>:=</span> <span style=color:#0550ae>12345</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>otherIntStrFromInt</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>strconv</span><span style=color:#1f2328>.</span><span style=color:#6639ba>FormatInt</span><span style=color:#1f2328>(</span><span style=color:#6639ba>int64</span><span style=color:#1f2328>(</span><span style=color:#1f2328>otherIntValueToStr</span><span style=color:#1f2328>),</span> <span style=color:#0550ae>10</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;格式化整数为字符串:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>otherIntStrFromInt</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 格式化无符号整数为字符串  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>uintValueToStr</span> <span style=color:#0550ae>:=</span> <span style=color:#6639ba>uint64</span><span style=color:#1f2328>(</span><span style=color:#0550ae>98765</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>uintStrFromUint</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>strconv</span><span style=color:#1f2328>.</span><span style=color:#6639ba>FormatUint</span><span style=color:#1f2328>(</span><span style=color:#1f2328>uintValueToStr</span><span style=color:#1f2328>,</span> <span style=color:#0550ae>10</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;格式化无符号整数为字符串:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>uintStrFromUint</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 格式化浮点数为字符串  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>floatValueToStr</span> <span style=color:#0550ae>:=</span> <span style=color:#0550ae>2.71828</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>floatStrFromFloat</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>strconv</span><span style=color:#1f2328>.</span><span style=color:#6639ba>FormatFloat</span><span style=color:#1f2328>(</span><span style=color:#1f2328>floatValueToStr</span><span style=color:#1f2328>,</span> <span style=color:#0a3069>&#39;f&#39;</span><span style=color:#1f2328>,</span> <span style=color:#0550ae>-</span><span style=color:#0550ae>1</span><span style=color:#1f2328>,</span> <span style=color:#0550ae>64</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;格式化浮点数为字符串:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>floatStrFromFloat</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 布尔值转换为字符串  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>boolValueToStr</span> <span style=color:#0550ae>:=</span> <span style=color:#cf222e>true</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>boolStrFromBool</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>strconv</span><span style=color:#1f2328>.</span><span style=color:#6639ba>FormatBool</span><span style=color:#1f2328>(</span><span style=color:#1f2328>boolValueToStr</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;布尔值转字符串:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>boolStrFromBool</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=os>os</h2><h3 id=文件和目录操作>文件和目录操作</h3><blockquote><p>打开文件</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>Open</span><span style=color:#1f2328>(</span><span style=color:#1f2328>name</span> <span style=color:#cf222e>string</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>file</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>File</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span>
</span></span></code></pre></td></tr></table></div></div><p>打开一个文件用于读取，如果操作成功返回一个只读的文件对象</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>OpenFile</span><span style=color:#1f2328>(</span><span style=color:#1f2328>name</span> <span style=color:#cf222e>string</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>flag</span> <span style=color:#cf222e>int</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>perm</span> <span style=color:#1f2328>FileMode</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>(</span><span style=color:#0550ae>*</span><span style=color:#1f2328>File</span><span style=color:#1f2328>,</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span>
</span></span></code></pre></td></tr></table></div></div><p>使用指定的标志 <code>flag</code>（如 O_RDONLY 等）打开指定名称的文件，或使用指定的权限模式 <code>perm</code>（如 0666）创建文件</p><p><code>flag</code> 可以选下列的值:</p><ul><li><code>os.O_RDONLY</code>：只读</li><li><code>os.O_WRONLY</code>：只写</li><li><code>os.O_RDWR</code>：读写</li><li><code>os.O_APPEND</code>：追加写</li><li><code>os.O_CREATE</code>：如果文件不存在则创建</li><li><code>os.O_TRUNC</code>：打开时清空文件</li><li><code>os.O_EXCL</code>: 和 <code>os.O_CREATE</code> 配合使用，文件必须不存在</li><li><code>os.O_TRUNC</code>: 打开时清空文件</li></ul><p><code>perm</code> 表示文件的权限，在 Unix 和类 Unix 系统（如 Linux）中，文件的权限通常用一个三位数的八进制数来表示，这个数被称为权限模式。其中，第一位表示文件类型，接下来的三位表示所有者（owner）的权限，再接下来的三位表示所属组（group）的权限，最后三位表示其他用户的权限，所以这个参数在 Windows 下是没有意义的</p><blockquote><p>创建文件</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>Create</span><span style=color:#1f2328>(</span><span style=color:#1f2328>name</span> <span style=color:#cf222e>string</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>file</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>File</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span>
</span></span></code></pre></td></tr></table></div></div><p>如果文件不存在则使用模式 0666 创建一个名为 <code>name</code> 的文件，返回的文件对象进行读写，如果文件存在，则将文件清空</p><blockquote><p>删除文件或目录</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>Remove</span><span style=color:#1f2328>(</span><span style=color:#1f2328>path</span> <span style=color:#cf222e>string</span><span style=color:#1f2328>)</span> <span style=color:#cf222e>error</span>
</span></span></code></pre></td></tr></table></div></div><p>删除 <code>name</code> 指定的文件或目录</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>RemoveAll</span><span style=color:#1f2328>(</span><span style=color:#1f2328>path</span> <span style=color:#cf222e>string</span><span style=color:#1f2328>)</span> <span style=color:#cf222e>error</span>
</span></span></code></pre></td></tr></table></div></div><p>删除 <code>path</code> 指定的文件，如果 <code>path</code> 是目录，则删除它包含的所有下级对象，它会尝试删除所有对象，除非遇到错误</p><blockquote><p>写入文件</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>f</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>File</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>Write</span><span style=color:#1f2328>(</span><span style=color:#1f2328>b</span> <span style=color:#1f2328>[]</span><span style=color:#cf222e>byte</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>n</span> <span style=color:#cf222e>int</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span>
</span></span></code></pre></td></tr></table></div></div><p>向文件中写入 <code>len(b)</code> 字节数据。它返回写入的字节数和可能遇到的任何错误。</p><blockquote><p>读取文件</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>f</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>File</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>Read</span><span style=color:#1f2328>(</span><span style=color:#1f2328>b</span> <span style=color:#1f2328>[]</span><span style=color:#cf222e>byte</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>n</span> <span style=color:#cf222e>int</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span>
</span></span></code></pre></td></tr></table></div></div><p>从f中读取最多 <code>len(b)</code> 字节数据并写入 <code>b</code>。它返回读取的字节数和可能遇到的任何错误。</p><blockquote><p>重命名文件或目录</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>Rename</span><span style=color:#1f2328>(</span><span style=color:#1f2328>oldpath</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>newpath</span> <span style=color:#cf222e>string</span><span style=color:#1f2328>)</span> <span style=color:#cf222e>error</span>
</span></span></code></pre></td></tr></table></div></div><p>修改 <code>oldpath</code> 指定的文件或目录，或移动一个文件</p><blockquote><p>获取当前工作目录</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>Getwd</span><span style=color:#1f2328>()</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>dir</span> <span style=color:#cf222e>string</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>改变当前工作目录</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>Chdir</span><span style=color:#1f2328>(</span><span style=color:#1f2328>dir</span> <span style=color:#cf222e>string</span><span style=color:#1f2328>)</span> <span style=color:#cf222e>error</span>
</span></span></code></pre></td></tr></table></div></div><p>将工作目录修改为 <code>dir</code> 指定的目录</p><blockquote><p>判断类</p></blockquote><p>下列函数用于判断错误是否是某种类型</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>IsNotExist</span><span style=color:#1f2328>(</span><span style=color:#1f2328>err</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span> <span style=color:#cf222e>bool</span> <span style=color:#57606a>// 文件不存在</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>IsExist</span><span style=color:#1f2328>(</span><span style=color:#1f2328>err</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span> <span style=color:#cf222e>bool</span> <span style=color:#57606a>// 文件已经存在</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>IsPermission</span><span style=color:#1f2328>(</span><span style=color:#1f2328>err</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span> <span style=color:#cf222e>bool</span> <span style=color:#57606a>// 无权限</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>IsTimeout</span><span style=color:#1f2328>(</span><span style=color:#1f2328>err</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span> <span style=color:#cf222e>bool</span> <span style=color:#57606a>// 超时</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=环境变量>环境变量</h3><blockquote><p>获取所有环境变量</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>Environ</span><span style=color:#1f2328>()</span> <span style=color:#1f2328>[]</span><span style=color:#cf222e>string</span>
</span></span></code></pre></td></tr></table></div></div><p>获取所有的环境变量，并返回格式为 <code>key=value</code> 的字符串切片</p><blockquote><p>获取指定的环境变量</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>Getenv</span><span style=color:#1f2328>(</span><span style=color:#1f2328>key</span> <span style=color:#cf222e>string</span><span style=color:#1f2328>)</span> <span style=color:#cf222e>string</span>
</span></span></code></pre></td></tr></table></div></div><p>查找名为 <code>key</code> 的环境变量并返回它的值，如果不存在会返回空字符串</p><blockquote><p>设置环境变量</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>Setenv</span><span style=color:#1f2328>(</span><span style=color:#1f2328>key</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>value</span> <span style=color:#cf222e>string</span><span style=color:#1f2328>)</span> <span style=color:#cf222e>error</span>
</span></span></code></pre></td></tr></table></div></div><p>设置名为 <code>key</code> 的环境变量</p><h3 id=命令行参数>命令行参数</h3><p><code>os</code> 包中使用 <code>Args</code> 字符串切片表示命令行参数，其中第一个参数 <code>os.Args[0]</code> 是程序名</p><h3 id=example-2>example</h3><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">101
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">102
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">103
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">104
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">105
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">106
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">107
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">108
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">109
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">110
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">111
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">112
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">113
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">114
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>main</span><span style=color:#1f2328>()</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 创建文件  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>newFile</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>os</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Create</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;example.txt&#34;</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>!=</span> <span style=color:#cf222e>nil</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;创建文件出错:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span> <span style=color:#cf222e>else</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#cf222e>defer</span> <span style=color:#1f2328>newFile</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Close</span><span style=color:#1f2328>()</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;成功创建文件:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>newFile</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Name</span><span style=color:#1f2328>())</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 打开文件  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>file</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>os</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Open</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;example.txt&#34;</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>!=</span> <span style=color:#cf222e>nil</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;打开文件出错:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span> <span style=color:#cf222e>else</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#cf222e>defer</span> <span style=color:#1f2328>file</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Close</span><span style=color:#1f2328>()</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;成功打开文件:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>file</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Name</span><span style=color:#1f2328>())</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 打开文件（使用 OpenFile）  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>anotherFile</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>os</span><span style=color:#1f2328>.</span><span style=color:#6639ba>OpenFile</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;anotherfile.txt&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>os</span><span style=color:#1f2328>.</span><span style=color:#1f2328>O_CREATE</span><span style=color:#1f2328>|</span><span style=color:#1f2328>os</span><span style=color:#1f2328>.</span><span style=color:#1f2328>O_WRONLY</span><span style=color:#1f2328>,</span> <span style=color:#0550ae>0644</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>!=</span> <span style=color:#cf222e>nil</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;打开文件出错:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span> <span style=color:#cf222e>else</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#cf222e>defer</span> <span style=color:#1f2328>anotherFile</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Close</span><span style=color:#1f2328>()</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;成功打开文件:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>anotherFile</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Name</span><span style=color:#1f2328>())</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 写入文件  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>dataToWrite</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>[]</span><span style=color:#6639ba>byte</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;Hello, Golang!&#34;</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>bytesWritten</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>anotherFile</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Write</span><span style=color:#1f2328>(</span><span style=color:#1f2328>dataToWrite</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>!=</span> <span style=color:#cf222e>nil</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;写入文件出错:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>       <span style=color:#cf222e>return</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Printf</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;成功写入 %d 字节到文件\n&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>bytesWritten</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 读取文件  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>readBuffer</span> <span style=color:#0550ae>:=</span> <span style=color:#6639ba>make</span><span style=color:#1f2328>([]</span><span style=color:#cf222e>byte</span><span style=color:#1f2328>,</span> <span style=color:#0550ae>100</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>bytesRead</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>file</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Read</span><span style=color:#1f2328>(</span><span style=color:#1f2328>readBuffer</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>!=</span> <span style=color:#cf222e>nil</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#cf222e>if</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>!=</span> <span style=color:#1f2328>io</span><span style=color:#1f2328>.</span><span style=color:#1f2328>EOF</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>          <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;读取文件出错:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>          <span style=color:#cf222e>return</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>}</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Printf</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;从文件中读取 %d 字节的数据: %s\n&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>bytesRead</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>readBuffer</span><span style=color:#1f2328>[:</span><span style=color:#1f2328>bytesRead</span><span style=color:#1f2328>])</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 移除文件  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>_</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>_</span> <span style=color:#1f2328>=</span> <span style=color:#1f2328>os</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Create</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;toRemove.txt&#34;</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>err</span> <span style=color:#1f2328>=</span> <span style=color:#1f2328>os</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Remove</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;toRemove.txt&#34;</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>!=</span> <span style=color:#cf222e>nil</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;删除文件出错:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span> <span style=color:#cf222e>else</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;成功删除文件&#34;</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 重命名文件  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>err</span> <span style=color:#1f2328>=</span> <span style=color:#1f2328>os</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Rename</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;anotherfile.txt&#34;</span><span style=color:#1f2328>,</span> <span style=color:#0a3069>&#34;renamedfile.txt&#34;</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>!=</span> <span style=color:#cf222e>nil</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;重命名文件出错:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span> <span style=color:#cf222e>else</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;成功重命名文件&#34;</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 创建目录  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>err</span> <span style=color:#1f2328>=</span> <span style=color:#1f2328>os</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Mkdir</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;example_dir&#34;</span><span style=color:#1f2328>,</span> <span style=color:#0550ae>0755</span><span style=color:#1f2328>)</span> <span style=color:#57606a>// 0755是目录权限，表示所有者具有读写执行权限，其他人具有读和执行权限  </span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>!=</span> <span style=color:#cf222e>nil</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;创建目录出错:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>       <span style=color:#cf222e>return</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 改变工作目录  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>err</span> <span style=color:#1f2328>=</span> <span style=color:#1f2328>os</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Chdir</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;example_dir&#34;</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>!=</span> <span style=color:#cf222e>nil</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;改变工作目录出错:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span> <span style=color:#cf222e>else</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>newCurrentDir</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>_</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>os</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Getwd</span><span style=color:#1f2328>()</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;新的工作目录:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>newCurrentDir</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 获取当前工作目录  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>currentDir</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>os</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Getwd</span><span style=color:#1f2328>()</span>  
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>!=</span> <span style=color:#cf222e>nil</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;获取当前工作目录出错:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span> <span style=color:#cf222e>else</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;当前工作目录:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>currentDir</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>_</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>_</span> <span style=color:#1f2328>=</span> <span style=color:#1f2328>os</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Create</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;dir_file&#34;</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>_</span> <span style=color:#1f2328>=</span> <span style=color:#1f2328>os</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Chdir</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;..&#34;</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 递归删除目录及其内容  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>err</span> <span style=color:#1f2328>=</span> <span style=color:#1f2328>os</span><span style=color:#1f2328>.</span><span style=color:#6639ba>RemoveAll</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;example_dir&#34;</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>!=</span> <span style=color:#cf222e>nil</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;删除目录出错:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span> <span style=color:#cf222e>else</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;成功删除目录及其内容&#34;</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 获取环境变量  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>goPath</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>os</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Getenv</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;GOPATH&#34;</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;GOPATH环境变量:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>goPath</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 设置环境变量  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>err</span> <span style=color:#1f2328>=</span> <span style=color:#1f2328>os</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Setenv</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;MY_VARIABLE&#34;</span><span style=color:#1f2328>,</span> <span style=color:#0a3069>&#34;my_value&#34;</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>!=</span> <span style=color:#cf222e>nil</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;设置环境变量出错:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span> <span style=color:#cf222e>else</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Print</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;成功设置环境变量：&#34;</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#1f2328>os</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Getenv</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;MY_VARIABLE&#34;</span><span style=color:#1f2328>))</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 获取命令行参数  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;命令行参数:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>os</span><span style=color:#1f2328>.</span><span style=color:#1f2328>Args</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=io>I/O</h2><h3 id=io-1>io</h3><p><code>io</code> 库是 Go 里面 IO 相关的最核心的库，因为许多用于处理 I/O 操作的接口和函数定义在这个库里。虽然这个库不涉及具体 I/O 的实现，但是描述的是最核心的 I/O 接口语义。Go 语言的 <code>io</code> 包充分利用接口的特性，通过为不同的 I/O 操作提供一致的接口，提高了可扩展性和灵活性，比如现在你有一段文件读取的代码，现在需要实现网络读取的功能，只需要将实现了相同接口的网络连接传递给相同的代码，而无需修改剩下的部分</p><p>下面面这张图充分体现了 Go 的 I/O 操作，都是以 <code>io</code> 库为中心发散的</p><p><img src=/images/lesson04-img/img01.png alt></p><h4 id=接口>接口</h4><blockquote><p>基本接口</p></blockquote><p><code>io</code> 库中有两个最基本最重要的接口 <code>Reader</code> 和 <code>Writer</code>，它们各自拥有一个方法:</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>type</span> <span style=color:#1f2328>Reader</span> <span style=color:#cf222e>interface</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>    <span style=color:#6639ba>Read</span><span style=color:#1f2328>(</span><span style=color:#1f2328>p</span> <span style=color:#1f2328>[]</span><span style=color:#cf222e>byte</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>n</span> <span style=color:#cf222e>int</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cf222e>type</span> <span style=color:#1f2328>Writer</span> <span style=color:#cf222e>interface</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>    <span style=color:#6639ba>Write</span><span style=color:#1f2328>(</span><span style=color:#1f2328>p</span> <span style=color:#1f2328>[]</span><span style=color:#cf222e>byte</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>n</span> <span style=color:#cf222e>int</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><code>Reader</code> 表示可读对象，<code>Read</code> 可以将最多 <code>len(p)</code> 个字节读入 <code>p</code>，返回读取到的字节数 <code>n</code>（0&lt;=n&lt;=len(p) 和遇到的任何错误</li><li><code>Writer</code> 表示可写对象，<code>Write</code> 将 <code>len(p)</code> 个字节从 <code>p</code> 写入底层数据流，返回成功写入的字节数 <code>n</code> (0&lt;=n&lt;=len(p)) 和遇到的任何错误</li></ul><p>还有两个接口分别是</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>type</span> <span style=color:#1f2328>Closer</span> <span style=color:#cf222e>interface</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>	<span style=color:#6639ba>Close</span><span style=color:#1f2328>()</span> <span style=color:#cf222e>error</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cf222e>type</span> <span style=color:#1f2328>Seeker</span> <span style=color:#cf222e>interface</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>	<span style=color:#6639ba>Seek</span><span style=color:#1f2328>(</span><span style=color:#1f2328>offset</span> <span style=color:#cf222e>int64</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>whence</span> <span style=color:#cf222e>int</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>(</span><span style=color:#cf222e>int64</span><span style=color:#1f2328>,</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><code>Closer</code> 表示可以关闭的对象，<code>Close</code> 方法用于关闭对象，释放资源</li><li><code>Seeker</code> 表示可以随机读取的对象，<code>Seeker</code> 方法将当前读写位置设置为偏移量 <code>offset</code> 字节之后的位置，<code>whence</code> 可以使 0、1、2<ul><li>0：表示相对于文件起始位置，offset 必须为非负数</li><li>1：表示相对于当前位置，offset 可以为负数</li><li>2：表示相对于文件结尾，offset 可以为负数</li></ul></li></ul><blockquote><p>组合接口</p></blockquote><p><code>io</code> 包通过匿名的方式将接口组合，如 <code>ReadWriter</code> 就是将 <code>Writer</code> 接口和 <code>Reader</code> 接口组合，如果要实现 <code>ReadWriter</code> 接口就要同时实现 <code>Reader</code> 和 <code>Writer</code> 接口的方法。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>type</span> <span style=color:#1f2328>ReadWriter</span> <span style=color:#cf222e>interface</span> <span style=color:#1f2328>{</span> 
</span></span><span style=display:flex><span>	<span style=color:#1f2328>Reader</span> 
</span></span><span style=display:flex><span>	<span style=color:#1f2328>Writer</span> 
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>独立接口</p></blockquote><p>类似 <code>ReaderAt</code> 和 <code>ReadFrom</code> 的接口实现了特定的功能，这里不多做介绍</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>type</span> <span style=color:#1f2328>ReaderAt</span> <span style=color:#cf222e>interface</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>    <span style=color:#6639ba>ReadAt</span><span style=color:#1f2328>(</span><span style=color:#1f2328>p</span> <span style=color:#1f2328>[]</span><span style=color:#cf222e>byte</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>off</span> <span style=color:#cf222e>int64</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>n</span> <span style=color:#cf222e>int</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span>     <span style=color:#57606a>// 从指定位置读取</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cf222e>type</span> <span style=color:#1f2328>ReaderFrom</span> <span style=color:#cf222e>interface</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>    <span style=color:#6639ba>ReadFrom</span><span style=color:#1f2328>(</span><span style=color:#1f2328>r</span> <span style=color:#1f2328>Reader</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>n</span> <span style=color:#cf222e>int64</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span>     <span style=color:#57606a>// 从指定的 Reader 中读取</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span>
</span></span></code></pre></td></tr></table></div></div><p><img src=/images/lesson04-img/img02.png alt></p><h4 id=函数>函数</h4><blockquote><p>Copy</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>Copy</span><span style=color:#1f2328>(</span><span style=color:#1f2328>dst</span> <span style=color:#1f2328>Writer</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>src</span> <span style=color:#1f2328>Reader</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>written</span> <span style=color:#cf222e>int64</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span>
</span></span></code></pre></td></tr></table></div></div><p>从源 <code>src</code> 复制数据到目标 <code>dst</code>，直到源文件结束或发生错误，返回复制的字节数 <code>n</code> 和可能的错误</p><blockquote><p>CopyN</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>CopyN</span><span style=color:#1f2328>(</span><span style=color:#1f2328>dst</span> <span style=color:#1f2328>Writer</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>src</span> <span style=color:#1f2328>Reader</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>n</span> <span style=color:#cf222e>int64</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>written</span> <span style=color:#cf222e>int64</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span>
</span></span></code></pre></td></tr></table></div></div><p>从源 <code>src</code> 复制数据到目标 <code>dst</code> 最多复制 <code>n</code> 个字节，返回复制的字节数 <code>n</code> 和可能的错误</p><blockquote><p>ReadAll</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>ReadAll</span><span style=color:#1f2328>(</span><span style=color:#1f2328>r</span> <span style=color:#1f2328>Reader</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>([]</span><span style=color:#cf222e>byte</span><span style=color:#1f2328>,</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span>
</span></span></code></pre></td></tr></table></div></div><p>读取 <code>r</code> 中的所有数据，不限制读取的大小</p><blockquote><p>ReadAtLeast</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>ReadAtLeast</span><span style=color:#1f2328>(</span><span style=color:#1f2328>r</span> <span style=color:#1f2328>Reader</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>buf</span> <span style=color:#1f2328>[]</span><span style=color:#cf222e>byte</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>min</span> <span style=color:#cf222e>int</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>n</span> <span style=color:#cf222e>int</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span>
</span></span></code></pre></td></tr></table></div></div><p>读取 <code>r</code> 中至少 <code>min</code> 字节数据，如果数据不足，会返回一个无法读取请求字节数的错误</p><blockquote><p>ReadFull</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>ReadFull</span><span style=color:#1f2328>(</span><span style=color:#1f2328>r</span> <span style=color:#1f2328>Reader</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>buf</span> <span style=color:#1f2328>[]</span><span style=color:#cf222e>byte</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>n</span> <span style=color:#cf222e>int</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span>
</span></span></code></pre></td></tr></table></div></div><p>读取 <code>r</code> 中 <code>len(buf)</code> 字节数据，如果数据不足，会返回一个无法读取请求字节数的错误</p><h3 id=bufio>bufio</h3><p>使用 Golang 进行写入文件操作时，如果每次都进行系统调用写入磁盘，在很多场景下都会影响程序的性能。<code>bufio</code> 包提供了带缓冲的读写函数，在读写文件或网络数据时，可以使用 <code>bufio</code> 来提高效率，例如，从一个大文件中读取数据时，可以使用 <code>bufio.Reader</code>来每次读取一些数据到缓冲区中，然后从缓冲区中读取数据，避免每次读取都进行系统调用，提高效率。</p><h4 id=writer>Writer</h4><p><code>bufio.Writer</code> 是一个带有缓冲区的 <code>io.Writer</code> 接口的实现，结构体定义如下：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>type</span> <span style=color:#1f2328>Writer</span> <span style=color:#cf222e>struct</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>err</span> <span style=color:#cf222e>error</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>buf</span> <span style=color:#1f2328>[]</span><span style=color:#cf222e>byte</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>n</span>   <span style=color:#cf222e>int</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>wr</span>  <span style=color:#1f2328>io</span><span style=color:#1f2328>.</span><span style=color:#1f2328>Writer</span>  
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>NewWriter</span><span style=color:#1f2328>(</span><span style=color:#1f2328>w</span> <span style=color:#1f2328>io</span><span style=color:#1f2328>.</span><span style=color:#1f2328>Writer</span><span style=color:#1f2328>)</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>Writer</span>                  <span style=color:#57606a>// 获取一个以 w 作为底层 io.Writer 的 bufio.Writer</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>NewWriterSize</span><span style=color:#1f2328>(</span><span style=color:#1f2328>w</span> <span style=color:#1f2328>io</span><span style=color:#1f2328>.</span><span style=color:#1f2328>Writer</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>size</span> <span style=color:#cf222e>int</span><span style=color:#1f2328>)</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>Writer</span>      <span style=color:#57606a>// 获取一个以 w 作为底层 io.Writer 缓冲区大小为 size 的 bufio.Writer</span>
</span></span></code></pre></td></tr></table></div></div><p><code>bufio.Writer</code> 常用的方法有:</p><blockquote><p>写入</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>b</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>Writer</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>Write</span><span style=color:#1f2328>(</span><span style=color:#1f2328>p</span> <span style=color:#1f2328>[]</span><span style=color:#cf222e>byte</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>nn</span> <span style=color:#cf222e>int</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span> <span style=color:#57606a>// 将字节切片 p 的内容写入缓存中</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>b</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>Writer</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>WriteByte</span><span style=color:#1f2328>(</span><span style=color:#1f2328>c</span> <span style=color:#cf222e>byte</span><span style=color:#1f2328>)</span> <span style=color:#cf222e>error</span>            <span style=color:#57606a>// 将一个字符串写入缓存中</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>b</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>Writer</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>WriteByte</span><span style=color:#1f2328>(</span><span style=color:#1f2328>c</span> <span style=color:#cf222e>byte</span><span style=color:#1f2328>)</span> <span style=color:#cf222e>error</span>          <span style=color:#57606a>// 写入单个字节</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>b</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>Writer</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>WriteRune</span><span style=color:#1f2328>(</span><span style=color:#1f2328>r</span> <span style=color:#cf222e>rune</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>size</span> <span style=color:#cf222e>int</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span>     <span style=color:#57606a>// 写入一个 unicode 码值</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>操作</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>b</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>Writer</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>Flush</span><span style=color:#1f2328>()</span> <span style=color:#cf222e>error</span>           <span style=color:#57606a>// 缓存中的所有数据写入到底层的 io.Writer 对象中</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>b</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>Writer</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>Available</span><span style=color:#1f2328>()</span> <span style=color:#cf222e>int</span>         <span style=color:#57606a>// 返回底层缓冲区的字节数</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>b</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>Writer</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>Reset</span><span style=color:#1f2328>(</span><span style=color:#1f2328>w</span> <span style=color:#1f2328>io</span><span style=color:#1f2328>.</span><span style=color:#1f2328>Writer</span><span style=color:#1f2328>)</span>        <span style=color:#57606a>// 清除缓存，并将底层 io.Writer 对象设置为 w</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>b</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>Writer</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>Size</span><span style=color:#1f2328>()</span> <span style=color:#cf222e>int</span>              <span style=color:#57606a>// 返回底层缓冲区的大小</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=reader>Reader</h4><p><code>bufio.Reader</code> 是一个带有缓冲区的 <code>io.Reader</code> 接口的实现，它会在内存中存储从底层 <code>io.Reader</code> 中读取到的数据，然后先从内存缓冲区中读取数据，这样可以减少访问底层 <code>io.Reader</code> 对象的次数以及减轻操作系统的压力。结构体定义：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>type</span> <span style=color:#1f2328>Reader</span> <span style=color:#cf222e>struct</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>buf</span>          <span style=color:#1f2328>[]</span><span style=color:#cf222e>byte</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>rd</span>           <span style=color:#1f2328>io</span><span style=color:#1f2328>.</span><span style=color:#1f2328>Reader</span> <span style=color:#57606a>// reader provided by the client  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>r</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>w</span>         <span style=color:#cf222e>int</span>       <span style=color:#57606a>// buf read and write positions   </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>err</span>          <span style=color:#cf222e>error</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>lastByte</span>     <span style=color:#cf222e>int</span> <span style=color:#57606a>// last byte read for UnreadByte; -1 means invalid  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>lastRuneSize</span> <span style=color:#cf222e>int</span> <span style=color:#57606a>// size of last rune read for UnreadRune; -1 means invalid  </span>
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>NewReader</span><span style=color:#1f2328>(</span><span style=color:#1f2328>rd</span> <span style=color:#1f2328>io</span><span style=color:#1f2328>.</span><span style=color:#1f2328>Reader</span><span style=color:#1f2328>)</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>Reader</span>                    <span style=color:#57606a>// 获取一个以 rd 作为底层 io.Reaer 的 bufio.Reader</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>NewReaderSize</span><span style=color:#1f2328>(</span><span style=color:#1f2328>rd</span> <span style=color:#1f2328>io</span><span style=color:#1f2328>.</span><span style=color:#1f2328>Reader</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>size</span> <span style=color:#cf222e>int</span><span style=color:#1f2328>)</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>Reader</span>      <span style=color:#57606a>// 获取一个以 rd 作为底层 io.Reaer 缓冲区大小为 size 的 bufio.Reaer</span>
</span></span></code></pre></td></tr></table></div></div><p><img src=/images/lesson04-img/img03.png alt></p><p><code>r</code>，<code>w</code> 是两个偏移量表示缓冲区中读写的位置。当从缓冲区中读取数据时，<code>r</code> 增加，当调用底层 <code>io.Reader</code> 的 <code>Read</code> 方法读取数据到缓冲区时，<code>w</code> 增加。</p><p>常用的方法：</p><blockquote><p>读取</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>b</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>Reader</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>Read</span><span style=color:#1f2328>(</span><span style=color:#1f2328>p</span> <span style=color:#1f2328>[]</span><span style=color:#cf222e>byte</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>n</span> <span style=color:#cf222e>int</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span>             <span style=color:#57606a>// 从缓冲区中读取数据到 p 中</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>b</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>Reader</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>ReadByte</span><span style=color:#1f2328>()</span> <span style=color:#1f2328>(</span><span style=color:#cf222e>byte</span><span style=color:#1f2328>,</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span>                      <span style=color:#57606a>// 从缓冲区中读取一个字节</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>b</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>Reader</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>ReadRune</span><span style=color:#1f2328>()</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>r</span> <span style=color:#cf222e>rune</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>size</span> <span style=color:#cf222e>int</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span>       <span style=color:#57606a>// 从缓冲区中读取一个 UTF-8 编码的字符</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>b</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>Reader</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>ReadLine</span><span style=color:#1f2328>()</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>line</span> <span style=color:#1f2328>[]</span><span style=color:#cf222e>byte</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>isPrefix</span> <span style=color:#cf222e>bool</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span>      <span style=color:#57606a>// 从缓冲区中读取一行</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>操作</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>b</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>Reader</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>Peek</span><span style=color:#1f2328>(</span><span style=color:#1f2328>n</span> <span style=color:#cf222e>int</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>([]</span><span style=color:#cf222e>byte</span><span style=color:#1f2328>,</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span>     <span style=color:#57606a>// 读取 n 个字节，但不改变偏移量</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>b</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>Reader</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>Reset</span><span style=color:#1f2328>(</span><span style=color:#1f2328>r</span> <span style=color:#1f2328>io</span><span style=color:#1f2328>.</span><span style=color:#1f2328>Reader</span><span style=color:#1f2328>)</span>              <span style=color:#57606a>//  清除缓存，并将底层的 io.Reader 重新设置为传入的 r </span>
</span></span></code></pre></td></tr></table></div></div><h3 id=strings--bytes>strings & bytes</h3><blockquote><p>strings</p></blockquote><p>由于 Go 中的字符串是只读的，所以 <code>strings</code> 包中只实现了读相关的接口，结构体定义如下：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>type</span> <span style=color:#1f2328>Reader</span> <span style=color:#cf222e>struct</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>s</span>        <span style=color:#cf222e>string</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>i</span>        <span style=color:#cf222e>int64</span> <span style=color:#57606a>// current reading index  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>prevRune</span> <span style=color:#cf222e>int</span>   <span style=color:#57606a>// index of previous rune; or &lt; 0  </span>
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>NewReader</span><span style=color:#1f2328>(</span><span style=color:#1f2328>s</span> <span style=color:#cf222e>string</span><span style=color:#1f2328>)</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>Reader</span>       <span style=color:#57606a>// 创建一个从 s 读取数据的 Reader</span>
</span></span></code></pre></td></tr></table></div></div><p>常用的方法有：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>r</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>Reader</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>Read</span><span style=color:#1f2328>(</span><span style=color:#1f2328>b</span> <span style=color:#1f2328>[]</span><span style=color:#cf222e>byte</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>n</span> <span style=color:#cf222e>int</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span>   <span style=color:#57606a>// 读取数据到 p</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>r</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>Reader</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>ReadByte</span><span style=color:#1f2328>()</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>b</span> <span style=color:#cf222e>byte</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span>  <span style=color:#57606a>// 读取一个字节</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>bytes</p></blockquote><p>跟 <code>strings.Reader</code> 差不多 <code>bytes.Reader</code> 也实现了读相关的接口，结构体定义如下：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>type</span> <span style=color:#1f2328>Reader</span> <span style=color:#cf222e>struct</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>s</span>        <span style=color:#1f2328>[]</span><span style=color:#cf222e>byte</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>i</span>        <span style=color:#cf222e>int64</span> <span style=color:#57606a>// current reading index  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>prevRune</span> <span style=color:#cf222e>int</span>   <span style=color:#57606a>// index of previous rune; or &lt; 0  </span>
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>NewReader</span><span style=color:#1f2328>(</span><span style=color:#1f2328>b</span> <span style=color:#1f2328>[]</span><span style=color:#cf222e>byte</span><span style=color:#1f2328>)</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>Reader</span>   <span style=color:#57606a>// 创建一个从 b 读取数据的 Reader</span>
</span></span></code></pre></td></tr></table></div></div><p>除此之外，<code>bytes</code> 包中还有一个 <code>bytes.Buffer</code> 结构体实现了读写相关的接口，结构体定义如下：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>type</span> <span style=color:#1f2328>Buffer</span> <span style=color:#cf222e>struct</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>buf</span>      <span style=color:#1f2328>[]</span><span style=color:#cf222e>byte</span> <span style=color:#57606a>// contents are the bytes buf[off : len(buf)]  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>off</span>      <span style=color:#cf222e>int</span>    <span style=color:#57606a>// read at &amp;buf[off], write at &amp;buf[len(buf)]  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>lastRead</span> <span style=color:#1f2328>readOp</span> <span style=color:#57606a>// last read operation, so that Unread* can work correctly.  </span>
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>NewBuffer</span><span style=color:#1f2328>(</span><span style=color:#1f2328>buf</span> <span style=color:#1f2328>[]</span><span style=color:#cf222e>byte</span><span style=color:#1f2328>)</span>           <span style=color:#57606a>// 将 buf 作为出初始内容并创建一个 Buffer， </span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>NewBufferString</span><span style=color:#1f2328>(</span><span style=color:#1f2328>s</span> <span style=color:#cf222e>string</span><span style=color:#1f2328>)</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>Buffer</span>   <span style=color:#57606a>// 将 []byte(s) 作为初始内容创建一个 Buffer</span>
</span></span></code></pre></td></tr></table></div></div><p>常用的方法：</p><blockquote><p>写入和读取</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>b</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>Buffer</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>Write</span><span style=color:#1f2328>(</span><span style=color:#1f2328>p</span> <span style=color:#1f2328>[]</span><span style=color:#cf222e>byte</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>n</span> <span style=color:#cf222e>int</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span>    <span style=color:#57606a>// 将 p 写入缓冲区</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>b</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>Buffer</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>WriteString</span><span style=color:#1f2328>(</span><span style=color:#1f2328>s</span> <span style=color:#cf222e>string</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>n</span> <span style=color:#cf222e>int</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span>   <span style=color:#57606a>// 将 s 写入缓冲区</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>b</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>Buffer</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>Read</span><span style=color:#1f2328>(</span><span style=color:#1f2328>p</span> <span style=color:#1f2328>[]</span><span style=color:#cf222e>byte</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>n</span> <span style=color:#cf222e>int</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span> <span style=color:#57606a>// 从缓冲区读取数据到 p</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>操作</p></blockquote><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>b</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>Buffer</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>Reset</span><span style=color:#1f2328>()</span>   <span style=color:#57606a>// 清空缓冲区的内容</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>b</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>Buffer</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>Len</span><span style=color:#1f2328>()</span> <span style=color:#cf222e>int</span>     <span style=color:#57606a>// 返回缓冲区中未读取的字节数</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>b</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>Buffer</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>Cap</span><span style=color:#1f2328>()</span> <span style=color:#cf222e>int</span>      <span style=color:#57606a>// 返回缓冲区的容量</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>b</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>Buffer</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>Bytes</span><span style=color:#1f2328>()</span> <span style=color:#1f2328>[]</span><span style=color:#cf222e>byte</span>   <span style=color:#57606a>// 以字节切片返回所有未读取的数据</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>b</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>Buffer</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>String</span><span style=color:#1f2328>()</span> <span style=color:#cf222e>string</span>    <span style=color:#57606a>// 以字符串返回所有未读取的数据</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=example-3>example</h3><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">72
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>main</span><span style=color:#1f2328>()</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 打开文件进行读写操作（如果文件不存在则创建，文件权限为0666）  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>file</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>os</span><span style=color:#1f2328>.</span><span style=color:#6639ba>OpenFile</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;example.txt&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>os</span><span style=color:#1f2328>.</span><span style=color:#1f2328>O_RDWR</span><span style=color:#1f2328>|</span><span style=color:#1f2328>os</span><span style=color:#1f2328>.</span><span style=color:#1f2328>O_CREATE</span><span style=color:#1f2328>,</span> <span style=color:#0550ae>0666</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>!=</span> <span style=color:#cf222e>nil</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;打开文件出错:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>       <span style=color:#cf222e>return</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>  
</span></span><span style=display:flex><span>    <span style=color:#cf222e>defer</span> <span style=color:#1f2328>file</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Close</span><span style=color:#1f2328>()</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 初始化 bufio.Writer    writer := bufio.NewWriter(file)  </span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 写入数据到缓冲区  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>data</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>[]</span><span style=color:#6639ba>byte</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;Hello, Golang!&#34;</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>_</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#1f2328>=</span> <span style=color:#1f2328>writer</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Write</span><span style=color:#1f2328>(</span><span style=color:#1f2328>data</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>!=</span> <span style=color:#cf222e>nil</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;写入数据到缓冲区出错:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>       <span style=color:#cf222e>return</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 获取缓冲区可用字节数  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>availableBytes</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>writer</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Available</span><span style=color:#1f2328>()</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Printf</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;缓冲区可用字节数: %d\n&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>availableBytes</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 获取底层缓冲区的大小  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>bufferSize</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>writer</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Size</span><span style=color:#1f2328>()</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Printf</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;底层缓冲区的大小: %d\n&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>bufferSize</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 刷新缓冲区到底层的 io.Writer（即文件）  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>err</span> <span style=color:#1f2328>=</span> <span style=color:#1f2328>writer</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Flush</span><span style=color:#1f2328>()</span>  
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>!=</span> <span style=color:#cf222e>nil</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;刷新缓冲区出错:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>       <span style=color:#cf222e>return</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;刷新缓冲区成功&#34;</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 初始化 bufio.Reader    file.Close()  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>file</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>_</span> <span style=color:#1f2328>=</span> <span style=color:#1f2328>os</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Open</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;example.txt&#34;</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#cf222e>defer</span> <span style=color:#1f2328>file</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Close</span><span style=color:#1f2328>()</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>reader</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>bufio</span><span style=color:#1f2328>.</span><span style=color:#6639ba>NewReader</span><span style=color:#1f2328>(</span><span style=color:#1f2328>file</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 从缓冲区读取数据  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>readData</span> <span style=color:#0550ae>:=</span> <span style=color:#6639ba>make</span><span style=color:#1f2328>([]</span><span style=color:#cf222e>byte</span><span style=color:#1f2328>,</span> <span style=color:#0550ae>12</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>n</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>reader</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Read</span><span style=color:#1f2328>(</span><span style=color:#1f2328>readData</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>!=</span> <span style=color:#cf222e>nil</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#cf222e>if</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>!=</span> <span style=color:#1f2328>io</span><span style=color:#1f2328>.</span><span style=color:#1f2328>EOF</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>          <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;从缓冲区读取数据出错:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>          <span style=color:#cf222e>return</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>}</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Printf</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;从缓冲区读取 %d 字节的数据: %s\n&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>n</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>readData</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 使用 Peek 方法  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>peekData</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>reader</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Peek</span><span style=color:#1f2328>(</span><span style=color:#0550ae>5</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>!=</span> <span style=color:#cf222e>nil</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#cf222e>if</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>!=</span> <span style=color:#1f2328>io</span><span style=color:#1f2328>.</span><span style=color:#1f2328>EOF</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>          <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;Peek 出错:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>          <span style=color:#cf222e>return</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>}</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Printf</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;Peek 到的数据: %s\n&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>peekData</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#57606a>// 使用 Reset 方法  </span>
</span></span><span style=display:flex><span>    <span style=color:#1f2328>newBuffer</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>bytes</span><span style=color:#1f2328>.</span><span style=color:#6639ba>NewBufferString</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;Reset Buffer&#34;</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>reader</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Reset</span><span style=color:#1f2328>(</span><span style=color:#1f2328>newBuffer</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>resetData</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>:=</span> <span style=color:#1f2328>reader</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Read</span><span style=color:#1f2328>(</span><span style=color:#1f2328>readData</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#1f2328>err</span> <span style=color:#0550ae>!=</span> <span style=color:#cf222e>nil</span> <span style=color:#1f2328>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Println</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;从重置后的缓冲区读取数据出错:&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span><span style=color:#1f2328>)</span>  
</span></span><span style=display:flex><span>       <span style=color:#cf222e>return</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>}</span>  
</span></span><span style=display:flex><span>    <span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Printf</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;从重置后的缓冲区读取 %d 字节的数据: %s\n&#34;</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>resetData</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>readData</span><span style=color:#1f2328>[:</span><span style=color:#1f2328>resetData</span><span style=color:#1f2328>])</span>  
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=初识开源>初识开源</h2><h3 id=什么是开源>什么是开源</h3><p>开源项目是指通过公开可用的源代码，允许任何人查看、使用、修改和分享的项目。一些比较出名的开源项目有：</p><ul><li>Linux 内核</li><li>Apache HTTP Server</li><li>Python</li><li>Docker</li><li>K8S</li><li>……</li></ul><p>开源项目有很多种组织模式，比如个人项目、开源社区……这里主要介绍开源社区，也是许多开源项目常见的组织形式。</p><p>开源社区是一个由志愿者组成的社群，致力于共同开发和分享开源软件、硬件或其他项目的社会集体。在开源社区中，人们可以自由地查看、使用、修改和分享项目的源代码，使用分散和协作的方式进行开源软件的开发。</p><h3 id=开源项目的运作>开源项目的运作</h3><blockquote><p>开源项目的一些重要角色和元素：</p></blockquote><ul><li>项目维护者Maintainer：维护者有一位或者多位，他们启动开源项目、管理项目、制定决策、集思广益并且和贡献者、用户以及营销平台密切接触。</li><li>项目贡献者Contributor：顾名思义对参与项目贡献的人，项目越大贡献者越多，具体的贡献方式下面会介绍到</li><li>用户User：开源项目的消费者、使用者</li><li>源代码和文档库Source Code & Documentation Library：维护者将项目源代码保存在一个中心化的源代码库（如 Github）。这样所有贡献者就可以访问代码并且参与贡献。开源项目的文档库包括安装指南、使用手册、贡献指南等，有助于新用户和开发者更好地理解和参与项目。</li><li>项目许可证License：每一个开源项目都必须指定一个分发许可证，主要作用是规定其他人使用、修改或分享你的开源项目的行为。一些常见的开源许可证包括MIT许可证、GNU通用公共许可证（GPL）、Apache许可证、BSD许可证等。</li><li>贡献指南：帮助贡献者理解合并请求（pull request）的流程、标准、范围等。</li></ul><blockquote><p>什么是开源项目贡献</p></blockquote><p>开源贡献就是使用一切办法提升开源项目，很多以为开源贡献只能贡献源代码（开始我也这么觉得）但其实还有很多其他方式：</p><ul><li>优化项目文档，帮助贡献者和用户更容易参与和使用</li><li>测试应用，发现问题，提 issue</li><li>编写单元测试、端到端测试，使得应用的质量更高</li><li>写文章或制作视频等，为项目布道</li><li>……</li></ul><blockquote><p>开源项目的开发流程</p></blockquote><p>一个具有一定规模的开源项目一般有一套成熟的开发流程，主要包括以下步骤：</p><ol><li>新想法的提出，可以是一个新项目、新特性或是对现有项目的提升</li><li>基于这个被提议的功能，社区里志愿的开发人员完成相关开发并创建一个对现有项目的合并请求（Pull Request）</li><li>社区中更有经验的人（通常是 Maintainer 或 Reviewer）将审查被提交的代码更改并决定是否应将其合并到代码的主要版本中，也可能要求作出一定的修改</li><li>将当前版本作为一个开发版本来发布，即使它可能包含已知和未知的 bugs。然后，该软件将由社区进行测试，并提供反馈，项目成员和维护人员会记录并考虑社区反馈并改进实施，然后将提供新的开发版本</li><li>反馈的循环会发生多次，直到项目成员认为软件的执行足够稳定，最后作为稳定版本发布</li></ol><h3 id=pr>PR</h3><p>一般来说，直接向主仓库（通常是上游仓库，即项目的原始仓库）推送修改是有限制的。这是因为直接推送可能会导致冲突、代码覆盖和其他问题。开源项目一般是通过 PR(Pull Request) 允许其他开发者为项目做出贡献同时确定代码质量的。</p><p>那么如何提一个 PR 呢？我们需要遵循以下步骤：</p><ol><li>Fork 项目：访问你想要为其做出贡献的项目的 GitHub 页面，点击右上角的"Fork"按钮，将该项目复制到你的GitHub账户下，这会在你的账户中创建一个对应的 Fork 仓库</li><li>克隆仓库：将上面说的 Fork 仓库克隆到本地</li><li>创建分支：在你的本地仓库中，创建一个新的分支</li><li>修改：在这个新的分支上进行修改和提交</li><li>推送到 Fork 仓库：将这个本地分支推送到你账户上的 Fork 仓库中</li><li>创建 PR：现在在你的仓库中出现了一个 <code>Compare & pull request</code> 按钮，单击创建一个 PR</li><li>根据社区规范填写 PR 表单：提交 PR 时，你会看到一个表单，填写标题和描述，解释你的修改是什么，为什么需要这个修改等。</li><li>等待审核：提交了 PR 之后，项目维护者会审查你的代码。可能会有讨论、修改的请求，直到最终合并或关闭。如果在审查中有修改，需要在本地更新分支，然后再次推送</li></ol><h3 id=怎么找到自己感兴趣的开源项目>怎么找到自己感兴趣的开源项目？</h3><h4 id=github-explore>Github Explore</h4><p>GitHub Explore 会向你展示你感兴趣的仓库，你可以给特定仓库设置提醒。</p><p><a href=https://github.com/explore/>https://github.com/explore/</a></p><h4 id=github-trending>Github Trending</h4><p>GitHub 提供了一个 &ldquo;Trending&rdquo; 页面，用于显示当前在 GitHub 上流行的开源项目。这个页面上列出了每日、每周和每月的趋势，涵盖了各种编程语言和主题。</p><p><a href=https://github.com/trending>https://github.com/trending</a></p><h4 id=github-直接搜索>Github 直接搜索</h4><ul><li><code>in:name &lt;关键字></code> 仓库名称带关键字查询</li><li><code>in:description &lt;关键字></code> 仓库描述带关键字查询</li><li><code>in:readme &lt;关键字></code> README 文件带关键字查询</li><li><code>stars(fork): >(=) &lt;数字> &lt;关键字></code> star 或 fork 数大于(或等于)指定数字的带关键字查询</li><li><code>stars(fork): 10..20 &lt;关键词></code> star 或 fork 数在 10 到 20 之间的带关键字查询</li><li><code>size:>=5000 &lt;关键词></code> 限定仓库大于等于 5000K 的带关键字查询</li><li><code>pushed(created):>2019-11-15 &lt;关键字></code> 更新 或 创建 日期在 2019 年 11 月 16 日之后的带关键字查询</li><li><code>license:apache-2.0 &lt;关键字></code> LICENSE 为 apache-2.0 的带关键字查询</li><li><code>language:java &lt;关键词></code> 仓库语言为 Java 的带关键字查询</li><li><code>user:&lt;用户名></code> 查询某个用户的项目</li><li><code>org:&lt;组织名></code> 查询某个组织的项目 这些可以混合使用，也可以先查找某一类的 awesome 仓库，然后从 awesome 库里找相关的资源，github 里有很多归纳仓库，可以先看看已有的收集，有时候会节省很多时间</li></ul><p>可以根据下面几个标准判断项目热度：</p><ol><li>Star 数量</li><li>Fort 数量</li><li>项目代码更新日期</li></ol><p><img src=/images/lesson04-img/img04.png alt></p><h4 id=技术论坛>技术论坛</h4><ul><li>掘金</li><li>Stack Overflow</li><li>Reddit</li><li>……</li></ul><h3 id=从开源项目中我们能学到什么>从开源项目中我们能学到什么</h3><p>贡献开源项目对于开发者来说好处多多，但是主要的好处有：</p><ul><li>抓住机会、提高技能水平</li><li>提高软件/应用的代码和文档水平</li><li>接触想法相似的朋友、建立人脉和社区</li><li>理解应用开发和维护的流程</li><li>从 Pull Request 反馈中学习</li><li>学习如何管理自己的开源项目</li></ul><h2 id=拓展阅读>拓展阅读</h2><ol><li><a href=https://zhuanlan.zhihu.com/p/394888082>浅析Go IO 的知识框架</a></li><li><a href=https://blog.csdn.net/luduoyuan/article/details/131057066>Golnag 中的 io 包详解</a></li><li><a href=https://www.cnblogs.com/yuejunasia/p/15161915.html>github 参与开源项目开发或贡献代码流程</a></li><li><a href=https://www.freecodecamp.org/chinese/news/a-practical-guide-to-start-opensource-contributions/>初学者开源项目参与指南</a></li></ol><h2 id=作业>作业</h2><h3 id=lv0>LV0</h3><p>将今天讲的包都自己敲一遍</p><h3 id=lv1>LV1</h3><p>借助这节课学习的 <code>time</code> 包和 <code>bufio</code> 包自己验证一下带缓冲 I/O 写是否比不带缓冲 I/O 写的效率更高（通常写入次数越多差异越明显）</p><p>TIPS: <code>time.Since</code></p><h3 id=lv2>LV2</h3><p>通过这节课的学习，相信你们都对 Go 语言的 I/O 有了比较清晰的认识。那么自己动手来实现一个日志 I/O 接口吧</p><p>需要实现的功能：</p><ol><li>将日志信息保存在文件</li><li>日志信息中要包含时间和时间戳</li></ol><p>参考下面的代码</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#6639ba>main</span><span style=color:#1f2328>()</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>	<span style=color:#57606a>// 打开一个日志文件，如果文件不存在则创建，追加写入</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#57606a>// 创建一个带时间戳的写入器</span>
</span></span><span style=display:flex><span>	<span style=color:#1f2328>logWriter</span><span style=color:#0550ae>:=&amp;</span><span style=color:#1f2328>timestampWriter</span><span style=color:#1f2328>{</span><span style=color:#1f2328>timestamp</span><span style=color:#1f2328>:</span><span style=color:#1f2328>time</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Now</span><span style=color:#1f2328>()}</span>
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>	<span style=color:#57606a>// 模拟用户操作并记录日志</span>
</span></span><span style=display:flex><span>	<span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Fprintln</span><span style=color:#1f2328>(</span><span style=color:#1f2328>logWriter</span><span style=color:#1f2328>,</span> <span style=color:#0a3069>&#34;用户登录&#34;</span><span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>	<span style=color:#1f2328>time</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Sleep</span><span style=color:#1f2328>(</span><span style=color:#0550ae>2</span> <span style=color:#0550ae>*</span> <span style=color:#1f2328>time</span><span style=color:#1f2328>.</span><span style=color:#1f2328>Second</span><span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>	<span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Fprintln</span><span style=color:#1f2328>(</span><span style=color:#1f2328>logWriter</span><span style=color:#1f2328>,</span> <span style=color:#0a3069>&#34;用户执行操作A&#34;</span><span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>	<span style=color:#1f2328>time</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Sleep</span><span style=color:#1f2328>(</span><span style=color:#0550ae>1</span> <span style=color:#0550ae>*</span> <span style=color:#1f2328>time</span><span style=color:#1f2328>.</span><span style=color:#1f2328>Second</span><span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>	<span style=color:#1f2328>fmt</span><span style=color:#1f2328>.</span><span style=color:#6639ba>Fprintln</span><span style=color:#1f2328>(</span><span style=color:#1f2328>logWriter</span><span style=color:#1f2328>,</span> <span style=color:#0a3069>&#34;用户执行操作B&#34;</span><span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a>// timestampWriter 是一个实现 io.Writer 接口的结构体，它在写入数据前添加时间戳</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>type</span> <span style=color:#1f2328>timestampWriter</span> <span style=color:#cf222e>struct</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>	<span style=color:#1f2328>timestamp</span> <span style=color:#1f2328>time</span><span style=color:#1f2328>.</span><span style=color:#1f2328>Time</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cf222e>func</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>tw</span> <span style=color:#0550ae>*</span><span style=color:#1f2328>timestampWriter</span><span style=color:#1f2328>)</span> <span style=color:#6639ba>Write</span><span style=color:#1f2328>(</span><span style=color:#1f2328>p</span> <span style=color:#1f2328>[]</span><span style=color:#cf222e>byte</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>(</span><span style=color:#1f2328>n</span> <span style=color:#cf222e>int</span><span style=color:#1f2328>,</span> <span style=color:#1f2328>err</span> <span style=color:#cf222e>error</span><span style=color:#1f2328>)</span> <span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>	<span style=color:#57606a>// 添加时间戳和时间</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#57606a>// 输出到文件</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=lv2-plus>LV2 PLUS</h3><p>将日志信息同时输出文件和控制台中</p><p>TIPS: <code>io.MultiWriter</code></p><p>实现任何你想实现的功能：</p><ol><li>通过环境变量，命令行参数（可以自己了解一下 <code>flag</code> 包），配置文件等方式指定日志文件路径</li><li>提供日志级别功能</li><li>允许自定义日志格式</li><li>……</li></ol><h3 id=lv-pro-max>LV PRO MAX</h3><p>实现一个文件同步工具，编写一个文件同步工具，可以监视目录中的文件变化，并在文件修改时自动将变化同步到另一个目录。</p><p>TIPS:</p><ul><li>可以用 <code>os.Stat()</code> 获取文件信息</li><li>可以用 <code>os.File.Readdir</code> 获取目录下所有文件的信息</li><li><code>os.FileInfo.Modtime</code> 可以获取文件更新的时间，当然也可以通过别的方法判断文件是否被修改</li><li><code>time.Ticker</code> 实现周期事件，或者自己了解一下 <code>cron</code></li></ul><h3 id=lv>LV?</h3><p><del>gayhub</del> gitHub 不仅仅是一个代码托管平台，还是一个面向开发者的社交网络。默认的个人主页十分单调，学习如何美化你的 Homepage，介绍你自己，让更多的人了解你吧！</p><p>可以按着这篇博客进行操作 <a href=https://blog.csdn.net/qq_44231797/article/details/129251980>https://blog.csdn.net/qq_44231797/article/details/129251980</a></p><p>不作要求自己感兴趣的可以玩一下</p><h3 id=lv-1>LV??</h3><p>想提 PR 但是无从下手？来挑挑蓝山后端 Go 课件的毛病吧！可以是错别字、格式、代码错误……</p><p>同样不作要求</p><p>提交方式: <a href=mailto:mull1on0910@gmail.com>mull1on0910@gmail.com</a></p></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="td-footer__left col-6 col-sm-4 order-sm-1"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=GitHub aria-label=GitHub><a target=_blank rel=noopener href=https://github.com/your-username/course-backend-go-2025 aria-label=GitHub><i class="fab fa-github"></i></a></li></ul></div><div class="td-footer__right col-6 col-sm-4 order-sm-3"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=GitHub aria-label=GitHub><a target=_blank rel=noopener href=https://github.com/your-username/course-backend-go-2025 aria-label=GitHub><i class="fab fa-github"></i></a></li></ul></div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2"></div></div></div></footer></div><script src=/js/main.min.d230e5c0c462caf31486b65a51a409f76a8cf4c96cd6d4b7b71da22758e95574.js integrity="sha256-0jDlwMRiyvMUhrZaUaQJ92qM9Mls1tS3tx2iJ1jpVXQ=" crossorigin=anonymous></script><script defer src=/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=/js/tabpane-persist.js></script></body></html>